---
# Playbook to test : 1) API call to AAP 2) Extra vars
- name: Test API Call
  hosts: "{{ hosts_group }}" # To be tested with extra variables?
  gather_facts: false

  tasks:
    - name: Printing something
      ansible.builtin.debug: 
        msg:
          - "Confirming API works"
      vars:
        ansible_host: "{{ hostname }}"
      ignore_errors: true

    - name: Test incoming extra variables
      ansible.builtin.debug: 
        msg:
          - "Variable_1 = {{ extra_var_1 }}"
          - "Variable_2 = {{ extra_var_2 }}"
      delegate_to: localhost
      ignore_errors: true

    - name: Get python3 version
      ansible.buitin.command:
        cmd: "hostname && python3 --version"
      vars:
        ansible_host: "{{ hostname }}"
      register: command_output
      ignore_errors: true

    - name: Printing output
      ansible.builtin.debug: 
        var: command_output
      delegate_to: localhost
      ignore_errors: true
